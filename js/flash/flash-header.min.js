
// onloading

const loadingAni = document.querySelector('.fl-loading-ani');

document.body.onload = function() {

	document.body.classList.remove('fl-page-is-not-loaded');
	if (loadingAni) loadingAni.classList.add('fl-stop');

}

// the-end-of-onloading



// using-functions

flashNavbar();

flashNavbarSearch();


// the-end-of-using-functions


// flash-navbar

function flashNavbar() {
	
	// elements-and-values
	const navbar = document.querySelector('.fl-navbar');
	const navbarToggler = document.querySelector('.fl-navbar-toggler');
	const navbarCloser = document.querySelector('.fl-md-menu-closer');
	const smScreenMenu = document.querySelector('.fl-md-menu');
	var navDropdownTogglers = navbar.getElementsByClassName('fl-nav-dropdown-toggler');
	var smScreenMenuDropdownTogglers = smScreenMenu.getElementsByClassName('fl-md-menu-dropdown-toggler');
	var smScreenMenuDropdowns = smScreenMenu.getElementsByClassName('fl-md-menu-dropdown-menu-con');
	var smScreenMenuOtherLinks = smScreenMenu.querySelectorAll('.fl-md-menu-link:not(.fl-md-menu-dropdown-toggler)');
	var isHovered = false;

	// functions
	function preventDefaultLinks() {

		for (var i = 0; i < navDropdownTogglers.length; i++) {

			navDropdownTogglers[i].onclick = function(event) { event.preventDefault(); }

		}

		for (var i = 0; i < smScreenMenuDropdownTogglers.length; i++) {

			smScreenMenuDropdownTogglers[i].onclick = function(event) { event.preventDefault(); }

		}

	}

	function toggle() {

		this.classList.toggle('fl-active');
		smScreenMenu.classList.toggle('fl-show');

		if (smScreenMenu.classList.contains('fl-show')) 
			document.documentElement.addEventListener('click', close);
		else 
			document.documentElement.removeEventListener('click', close);

	}

	function toggleDropdown() {

		const dropdown = this.parentElement.querySelector('.fl-md-menu-dropdown-menu-con');

		dropdown.classList.toggle('fl-show');
		this.classList.toggle('fl-active');

		closeOtherDropdowns(dropdown);

	}	

	function closeOtherDropdowns(dropdown) {

		for (var x = 0; x < smScreenMenuDropdowns.length; x++) {
			
			if (smScreenMenuDropdowns[x] == dropdown) continue;

			smScreenMenuDropdowns[x].classList.remove('fl-show');
			smScreenMenuDropdownTogglers[x].classList.remove('fl-active');

		}

		deactiveOtherLinks();

	}

	function deactiveOtherLinks() { 

		for (var y = 0; y < smScreenMenuOtherLinks.length; y++) {
			smScreenMenuOtherLinks[y].classList.remove('fl-active');
		} 

	}

	function close() {

		if (!isHovered) {

			navbarToggler.classList.remove('fl-active');
			smScreenMenu.classList.remove('fl-show');
			document.documentElement.removeEventListener('click', close);

		}	

	}

	const hide = () => {

		navbarToggler.classList.remove('fl-active');
		smScreenMenu.classList.remove('fl-show');
		document.documentElement.removeEventListener('click', close);	

	}



	function mouseIsOver() { isHovered = true; }

	function mouseIsOut() { isHovered = false; }

	// adding-functions
	navbarToggler.addEventListener('click', toggle);

	navbarToggler.addEventListener('mouseover', mouseIsOver);
	navbarToggler.addEventListener('mouseout', mouseIsOut);
	smScreenMenu.addEventListener('mouseover', mouseIsOver);
	smScreenMenu.addEventListener('mouseout', mouseIsOut);
	if (navbarCloser) navbarCloser.addEventListener('click', hide);

	for (var i = 0; i < smScreenMenuDropdownTogglers.length; i++) {

		smScreenMenuDropdownTogglers[i].addEventListener('click', toggleDropdown);

	}

	// using-functions
	preventDefaultLinks();

	// full-screen-menu
	if (smScreenMenu.classList.contains('fl-full-screen-md-menu-menu')) {

		const smScreenMenuList = smScreenMenu.querySelector('.fl-md-menu-list');
		var smScreenMenuListIsHovered = false;

		function closeFullScreenMenu() {

			if (!smScreenMenuListIsHovered) {

				navbarToggler.classList.remove('fl-active');
				smScreenMenu.classList.remove('fl-show');
				
			}

		}


		function mouseIsOverOnList() { smScreenMenuListIsHovered = true; }

		function mouseIsOutFromList() { smScreenMenuListIsHovered = false; }

		smScreenMenu.addEventListener('click', closeFullScreenMenu);
		smScreenMenuList.addEventListener('mouseover', mouseIsOverOnList);
		smScreenMenuList.addEventListener('mouseout', mouseIsOutFromList);

	}

}



// the-end-of-flash-navbar



// flash-navbar-search

function flashNavbarSearch(con) {

	// elements-and-values
	if(!con) con = document.querySelector('.fl-navbar-search-parent-js');

	// avoiding-errors
	if (!con) return;

	const form = con.querySelector('.fl-navbar-search');
	const input = form.querySelector('.fl-navbar-search-input');
	const showResults = form.getAttribute('show-results');
	const results = con.querySelector('.fl-navbar-results-of-search');
	const submit = form.querySelector('.fl-navbar-search-submit');
	const reset = form.querySelector('.fl-navbar-search-reset');

	const toggler = document.querySelector('.fl-navbar-search-toggler');
	const icon = document.querySelector('.fl-navbar-search-toggler .fa');
	var isHovered = true;

	// adding-functions
	if (showResults == "true") { 

		input.addEventListener('keyup', toggle);
		input.addEventListener('focusin', show);
		input.addEventListener('focusout', hide);

	} else {

		input.addEventListener('keyup', enableDisableButtons);
		
	}

	if (reset != undefined) reset.addEventListener('click', disableButtons);
	
	if (toggler) {

		toggler.addEventListener('click', toggleContainer);
		toggler.addEventListener('mouseover', mouseIsOver);
		toggler.addEventListener('mouseout', mouseIsOut);

	}
		
	con.addEventListener('mouseover', mouseIsOver);
	con.addEventListener('mouseout', mouseIsOut);

	if (showResults == "true") { 
		results.addEventListener('mouseover', mouseIsOver);
		results.addEventListener('mouseout', mouseIsOut);
	}	
	
	// functions
	function toggleContainer() {

		if (!con.classList.contains('fl-show'))
			document.documentElement.addEventListener('click', closeContainer);
		else
			document.documentElement.removeEventListener('click', closeContainer);

		this.classList.toggle('fl-active');
		con.classList.toggle('fl-show');
		toggleIcon();

	}



	function closeContainer() {

		if (!isHovered) {

			con.classList.remove('fl-show');
			document.documentElement.removeEventListener('click', closeContainer);

			if (toggler) toggler.classList.remove('fl-active');

			if (icon == undefined) return;

			icon.classList.add('fa-search');
			icon.classList.remove('fa-times');

		}	

	}

	function toggleIcon() {

		if (icon == undefined) return;

		icon.classList.toggle('fa-search');
		icon.classList.toggle('fa-times');

	}

	function mouseIsOver() { isHovered = true; }

	function mouseIsOut() { isHovered = false; }

	function toggle() {

		if (this.value != "") {

			results.classList.add('fl-show');
			input.classList.add('results-is-shown');
			enableSubmit();
			enableReset();

		} else { 

			hide();
			disableSubmit();
			disableReset();

		}	

	}

	function show() {

		if (this.value != "") { 

			results.classList.add('fl-show');
			input.classList.add('results-is-shown');
			enableSubmit();
			enableReset();

		}	


	}

	function hide() { results.classList.remove('fl-show'); input.classList.remove('results-is-shown'); }

	function enableSubmit() { if (submit) submit.removeAttribute('disabled'); }

	function disableSubmit() { if (submit) submit.setAttribute('disabled',''); }

	function enableReset() { if (reset) reset.removeAttribute('disabled'); }

	function disableReset() { if (reset) reset.setAttribute('disabled',''); }

	function disableButtons() {

		submit.setAttribute('disabled','');
		if (reset != undefined) reset.setAttribute('disabled','');
		input.value = "";

	}

	function enableDisableButtons() {

		if (this.value != "") {

			enableSubmit();
			enableReset();

		} else { 

			disableSubmit();
			disableReset();

		}

	}

}

// flash-navbar-search



// other-functions

function flashHideMdMenu() {

	const toggler = document.querySelector('.fl-navbar-toggler');
	const mdMenu = document.querySelector('.fl-md-menu');

	toggler.classList.remove('fl-active');
	mdMenu.classList.remove('fl-show');

}

function flashNavbarAnimations() {

	const navbar = document.querySelector('.fl-navbar');
	var lastScrollTop;
	var scrollTop;
	const firstSize = 65;

	const check = () => {

		scrollTop = document.body.scrollTop || document.documentElement.scrollTop;

		if (scrollTop > 1) navbar.classList.add('fl-new-styled-navbar');
		else navbar.classList.remove('fl-new-styled-navbar');
		
	}

	const flashSmartCheck = () => {

		scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
		
		if (scrollTop == 0) { 
			navbar.classList.remove('fl-hidden-navbar');
			navbar.classList.remove('fl-new-styled-navbar');
		}
		else if (scrollTop > firstSize && scrollTop >= lastScrollTop) { 
			navbar.classList.add('fl-hidden-navbar');
			navbar.classList.remove('fl-new-styled-navbar');
		}	
		else if (scrollTop < lastScrollTop) { 
			navbar.classList.remove('fl-hidden-navbar');
			navbar.classList.add('fl-new-styled-navbar'); 
		}	 

		lastScrollTop = scrollTop;	

	}

	window.addEventListener('scroll', check);
	window.addEventListener('load', check);

}

// the-end-of-other-functions